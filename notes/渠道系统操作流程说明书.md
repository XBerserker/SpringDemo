# 总部用户操作流程
## 1. 总部代销售公司下要货计划
1. 登录总部用户账号
1. 依次点击打开``渠道管理→格力订单管理``在这里面找到``增加订单``，并点击之
1. 在弹出的对话框中，现在“计划单位”中选择要代替下单的销售公司，然后依次选择基地和大类，选择收货地址（这里的收货地址是销售公司自己维护的），填写开票日期和政策日期以及订单备注
1. 点击下方的``增加物料``，然后在弹出的对话框中，选择物料，并填写要货数量和物料备注（物料备注可选）
1. 选择完物料以后，双击新生成的订单行，确认并填写数量、销售机型类型、货款类型、可选择填写奖励款类型、使用奖励款金额河备注，填完以上信息以后，点击提交，点击确定，就会生成订单记录了
1. 此时会生成一张订单状态为“待总部财务审批”的订单，选中这个订单
1. 点击**财务审批**，在弹出的对话框中填写信息，这里可以选择审批结果是通过或者驳回：
    1. **审批结果选择：通过**
        1. 填写审批备注（可选）
        1. 如果需要修改物料的批准单价，则双击订单行，并编辑它
        1. 点击提交，回到订单列表中，能够看到该订单的订单状态变为了“已完成”
        1. *在财务审批的时候，会检查销售公司的对应货款是否充足、并且扣除相应的金额，并且会在资金流水中产生资金流水记录*
    1. **审批结果选择：驳回**
        1. 被财务审核驳回的订单只能进行“修改订单”和“计划审批”操作
            1. **修改订单操作**
                1. 选中“被总部财务驳回”的订单，点击“修改订单”
                1. 在弹出的对话框中，可以修改订单备注、订单的销售类型、开票日期、政策日期、审批备注以及双击订单行以修改销售机型类型、批准价目表、批准数量、批准货款、批准奖励款金额、批准奖励款类型、是否更换基地、更换数量和物料备注
                1. 还有需要选择修改结果：
                    1. **提交财务**
                        1. 填写完以上信息以后，修改结果选择“提交财务”，提示操作成功以后，该订单的订单状态就会重新变回“待总部财务审核”，此时再重复总部财务审批的流程即可
                    1. **驳回下级**
                        1. 在“修改结果”处选择驳回加息，该订单的订单状态就会变为**“被总部计划驳回”**
                        1. 这个时候这张订单的操作权限就会给到这张单所属的销售公司
                        1. 销售公司能够对这张订单进行修改操作
                        1. 销售公司一次点击“渠道管理→总部要货单管理”
                        1. 找到刚刚被总部计划驳回的订单，点击修改订单
                        1. 在弹出的对话框中，重新填写对应的信息如：生产基地、产品大类、期望交货时间、收货地址、订单备注还有双击订单行后，按需修改物料的要货备注、货款类型、奖励款类型、奖励款金额、物料备注等信息，还能够进行新增物料和移除物料
                        1. 填好信息以后，点击提交，提示操作成功后，该订单的状态就变为了“待销售公司主管审批”
                        1. 此时，选中订单，点击“主管审批”在弹出的对话框中，填写对应的信息如：审批结果（*如果审批结果选择驳回的话就需要重新操作修改订单，也就是回到第5步*）、审批备注
                        1. 审批结果选择通过，点击提交，提示操作成功以后，订单的状态就会重新变回“待总部计划审批”，接下来该订单的操作权限就回到了总部用户这里了。
                        1. 接下来的操作就是总部计划审批的操作，有重合，将在下一节详细说！！！
                        1. **注意：如果修改了生产基地或者产品大类的话，下方的销售订单行就会消失，就会需要重新选择下单的物料**
            1. **计划审批操作**
                1. 选中“被总部财务驳回”的订单，点击“计划审批”
                1. 在弹出的对话框中，填写相应的信息如：订单销售类型、开单日期、政策日期、审批结果、是否转外仓（如果选择是，选择外仓处有下拉框，选中外仓以后，能够查看外仓的库存）、审批备注，
                1. 然后双击“销售订单行”，填写批准数量、保留数量、销售机型类型、批准价目表、批准货款类型、批准奖励款类型、批准奖励款金额、更换基地、更换数量等信息
                1. 审批结果选择：
                    1. **如果在审批结果处选择“驳回”则操作流程回到上边“修改订单操作→驳回下级”里边的流程**
                    1. **选择通过，则提示操作成功以后，该订单的订单状态就变为了“待总部财务审核”的状态**
                        1. **PS：倘若在“基础信息管理→组织开关控制”中，将“销售单据是否需要财务审核”的开关给关了（不勾选），那么将会有一下的效果：**
                            1. **当计划审批审单的时候，没有改过订单行的批准价格**，则此时点击提交，提示操作成功以后，订单的状态就会直接变成“已完成”，此时，销售公司的对应货款的最新余额会产生变化（增加或减少），销售公司资金流水中也会产生对应的资金流水记录
                            1. **当计划审批审单的时候，修改过订单行的批准价格**，则此时点击提交，提示操作成功以后，订单的状态会变成“待总部财务审核”，此时，销售公司的对应货款在最新余额不会发生变化，销售公司资金流水不会产生对应的资金流水记录，此时的订单需要总部财务审核
                1. 此时，经过上述的操作以后，订单的状态为“已完成”或“待总部财务审批”，如果是“待总部财务审批”的订单，则回到最开始的第7步，进行操作，总部代销售公司开要货计划单的整个流程就走完了。

## 2. 总部用户“保留订单”操作
1. 业务场景：
1. 登录总部用户账号
1. 依次点击打开“渠道管理→格力订单管理”
1. 选中订单状态为“待总部计划审批”的订单
1. 然后填写与订单相关的信息
1. 双击销售订单行，填写“保留数量”，*注意：批准数量+保留数量+更换数量≤要货数量*
1. 点击提交，提示操作成功，然后就会在“订单列表”中，自动生成一张保留订单，订单状态为“待总部计划审批”，原订单的订单状态此时就是“待总部财务审批”
1. 对于订单状态为“待总部计划审批”可以重复进行上述的保留订单操作，对原订单——订单状态为“待总部财务审批”进行财务审批操作
## 3. 总部用户“作废订单”操作
1. 业务场景：
1. 登录总部用户账号
1. 依次点击打开“渠道管理→格力订单管理”
1. 目前能够做作废操作的订单的订单状态有：待总部计划审批、待总部财务审批、被总部计划驳回、被总部财务驳回、已完成
    1. 其中，需要注意的是订单状态为“已完成”的订单，作废此类订单时，订单的要货单位（销售公司）下单时所用到的资金余额，会在“销售公司资金流水”中体现出来。
    1. 作废后，提示操作成功后，此时的订单状态应该变为“已作废”状态
## 4. 总部用户通过开负数单实现退货功能
1. 业务场景：
1. 登录总部用户账号
1. 依次点击打开“渠道管理→格力订单管理”
1. 点击“增加订单”，操作流程同**总部代销售公司下要货计划**，不同的是，在“数量”一栏，填写负数数量，以表示做退货处理。
1. 订单变为“已完成”的状态的时候，销售公司所使用的货款类型的余额上就会增加会对应的金额数。

# 销售公司用户操作流程
## 1. 销售公司用户下总部要货单
1. 登录销售公司用户
1. 依次点击打开``渠道管理→销售公司要货单管理``在这里面找到新增订单，并点击它
1. 在弹出的对话框中填写期望交付时间、按基地下单、按品类下单、提货方式、收货地址、订单备注等信息
1. 对话框的下半部分，找到``增加物料``，点击它
1. 在新弹出的对话框中，勾选需要添加的物料，填写信息，包括：要货数量、物料备注，点击确定（可以通过``系列名称``、``物料代码``、``物料名称``来检索需要添加的物料）
1. 然后点击关闭，回到上一层对话框中
1. 双击新增的``要货订单行``，填写货款类型、奖励款类型和使用奖励款金额
1. 点击提交，提示操作成功以后，会在要货计划订单列表中，生成一张订单状态为“待销售公司主管审批”的订单
1. 然后选中刚刚生成的新订单，点击上方的``主管审批``
1. 在弹出的对话框中填写审批备注以及**审批结果**
    1. 当审批结果选择**通过**点击提交，提示操作成功以后，会在``要货单列表``中，看到对应订单的订单状态变为了``待总部计划审批``
    1. 当审批结果选择**驳回**点击提价，提示操作成功以后，会在``要货单列表``中，看到对应订单的订单状态变为了``销售公司主管驳回``。对于订单状态为``销售公司主管驳回``的订单，需要对其进行``订单修改``操作
        1. 选中状态为``销售公司主管驳回``的订单，点击``订单修改``，在弹出的对话框中，
        1. 在弹出的对话框中，重新填写对应的信息如：生产基地、产品大类、期望交货时间、收货地址、订单备注还有双击订单行后，按需修改物料的要货备注、货款类型、奖励款类型、奖励款金额、物料备注等信息，还能够进行新增物料和移除物料
        1. 填好信息以后，点击提交，提示操作成功后，该订单的状态就变为了“待销售公司主管审批”
1. 此时该订单的操作权限就到了总部用户那里了，订单状态为``待总部计划审批``的订单

## 2. 总部用户审批销售公司要货单
1. 登录总部用户账号
1. 依次点击打开``渠道管理→格力订单管理``在里面找到``待总部计划审批``的订单，选中，点击计划审批
1. 在弹出的对话框中，填写相应的信息有：订单销售类型、开单日期、政策日期、是否转外仓及选择外仓并且可以查看外仓库存（在141上看到的库存都是0，正式环境上正常）、审批结果、审批备注
    1. 如果在**审批结果选择``驳回``**，则订单状态会变为``被总部计划驳回``，订单的操作权限发回给销售公司，销售公司看到这个处理结果以后就点击修改订单，回到**销售公司用户下总部要货单**中的**第2步**开始，即可
    1. 如果在**审批结果选择``通过``**，则订单状态会变为``待总部财务审批``，此时订单的操作权限还是在总部用户这里，销售公司无法对此订单进行操作。
1. 选中``待总部财务审批``的订单，此时的操作同**总部代销售公司下要货计划**处的第7步开始的操作一致，省略。


# 销售公司和下级代理商之间的下单流程
## 1. 代理商下要货单完整流程
1. 登录代理商账号
1. 依次点击打开``渠道管理→要货单管理``在右边刷新出来的主页面中，找到**新增订单**
1. 在弹出的对话框中，填写相关信息，如：期望交付时间、按品类下单、收货地址、是否自提以及自提人、订单备注以及订单的物料订单行
    1. 点击``增加物料``在弹出的对话框中，勾选需要下单的物料，输入要货数量和物料备注
    1. 点击确定
1. 双击新增加的物料行，填写物料的数量、需要使用的货款类型、奖励款类型以及使用奖励款的金额
1. 点击提交，在提示操作成功以后，会在主页面的订单列表中，生成一张订单状态为``待计划审批``的订单记录。
    1. 这个时候，代理商还能够对订单状态为“待计划审批”的订单进行**作废订单**操作，作废订单以后，无法对此订单继续后续的操作
1. 此时订单的权限就交到了销售公司那里了
1. 登录销售公司账号
1. 依次点击打开``渠道管理→销售单管理``在右边刷新出来的主页面中，找到**刚刚代理商新增的订单，订单的状态应为``待计划审批``**
    1. **注意：**在``基础信息管理→组织开关控制``中，有个``销售单据是否需要财务审核``如果该开关是关闭状态的话，对销售单进行计划审批时，填写完成审批信息如：计划审批备注、货运站及货运站提货人、是否自提及提货人信息、审批结果选择``通过``、发货仓库、批准数量、保留数量、批准货款类型、批准奖励款类型、批准奖励款金额等信息后，点击提交
    1. 此时，看到“操作成功”的提示以后，这个时候，代理商对应的货款余额以及对应仓库的库存会发生变化，产生对应的资金流水以及库存流水记录
    1. 订单的订单状态也会相应的变为“待提货”状态
    1. 如果有填写保留数量的话，那么就会生成一张订单状态为“待计划审批”的子订单
1. 选中订单，点击上方的``计划审批``，在弹出的对话框中填写对应的信息，如：货运站及货运站提货人信息、开票日期、政策日期、是否自提及提货人信息、审批备注、销售订单行里头的批准价目表、批准代价、批准数量、批准货款类型、批准奖励款类型、批准奖励款金额、发货仓库及保留数量还有审批结果这些信息
    1. **审批结果选择：驳回**
        1. 点击提交后，在看到“操作成功”的提示以后，能够在订单列表中，看到刚刚的订单的订单状态现在是变成了``被计划驳回``
        1. 此时这张订单的操作权限就到了下级代理商处，只有该订单的要货单位（代理商）能够对这个订单进行操作
        1. 登录下级代理商账号
        1. 依次点击打开``渠道管理→要货单管理``
        1. 选中``被计划驳回``的订单，点击上方的修改订单
        1. 在弹出的对话框中，填写相应的信息，如：收货地址、订单备注、订单行中的要货数量、货款类型、奖励款类型、使用奖励款金额以及物料备注
        1. 点击提交，在看到“操作成功”提示以后，订单的订单状态就变为了``待计划审批``，此时订单的操作权限已经回到了销售公司出，我们的操作步骤也回到了第1.8步
    1. **审批结果选择：通过**
        1. 如果销售公司的``基础信息管理→组织开关控制``中，``销售单据是否需要财务审核``开关如果没勾上，则在看到“操作成功”的提示以后，返回到订单列表中，会看到该订单的订单状态会直接变成“待提货”的状态，此时，需要检查代理商的资金流水和库存流水是否产生正常的记录，以及查看资金余额和库存情况是否正确
        1. 如果销售公司的``基础信息管理→组织开关控制``中，``销售单据是否需要财务审核``开关如果勾上，则在看到“操作成功”的提示以后，返回到订单列表中，会看到该订单的订单状态已经变成了“待财务审批”，此时，订单的资金流水和库存流水不会发生变动
1. 走到这一步，此时的订单状态应该为“待财务审核”，如果不是，请检查是否有步骤漏了，或者快了。选中订单，点击上方的“财务审批”按钮
1. 在弹出的对话款中，检查订单的各项信息有没有错，以及确认好审批结果
1. 填写审批备注，点击提交：
    1. **审批结果选择：通过**
        1. 点击提交后，在看到“操作成功”的提示以后，能够在订单列表中，看到刚刚的订单的订单状态现在是变成了``待提货``的状态，此时，代理商的资金流水和库存流水会产生对应的正确的记录，以及查看资金和库存情况是否正确（PS：当销售公司还没有做“销售公司发货”的这个动作的时候，下级代理商的仓库里面的物料的库存数量是不会发生变化的，这个时候这些物料的库存数量在销售公司对应仓库的对应物料的已分配数量里面，等销售公司完成“销售公司发货”的动作以后，已分配库存数量才会相应的减少，实际库存也会减少，可用库存不变，下级代理商的仓库中物料的库存数量会增加）
    1. **审批结果选择：驳回**
        1. 点击提交以后，在看到“操作成功”的提示以后，能够在订单列表中，看到刚刚的订单的订单状态现在是变成了``被财务驳回``的状态，此时资金和库存不会有变化
        1. 选中``被财务驳回``的订单，点击上方的``修改销售单``，在弹出的对话框中，填写对应的信息，如：收货地址、订单备注、货运站及货运站提货人信息、销售类型、开票日期、**修改结果**、审批备注、还有双击销售订单行修改销售机型类型、批准价目表、可能需要的批准单价、批准数量、保留数量、批准货款类型、批准奖励款类型、批准奖励款金额、发货仓库、物料备注信息
            1. **修改结果选择：提交财务：**
                1. 点击提交以后，看到“操作成功”的提示以后，该订单的订单状态就会变为“待财务审批”的状态
                1. 此时，就只需要对订单重新进行财务审批的操作即可
            1. **修改结果选择：驳回下级**
                1. 点击提交以后，看到“操作成功”的提示以后，该订单的订单状态就会变为“被计划驳回”的状态
                1. 此时，该订单的操作权限已经到了下级代理商，需要代理商修改订单重新提交就可以了
                1. 前面的内容中有重复的内容。。。
1. 至此，整个代理商下要货单的流程就已经走完了，总的来说就是“代理商新增要货单→销售公司计划审批→销售公司财务审批→销售公司发货”大致上就是这么一个流程，然后每个箭头都是双向的，都有通过以及驳回选择

## 2. 销售公司代代理商新增销售单
1. 前情提要：*销售公司代下级代理商下单，这部分内容和代理商下要货单中的销售公司操作部分有重合*
1. **步骤：**
1. 登录销售公司账号
1. 点击打开“渠道管理→销售单管理”，在右边刷新出来的页面中，点击“新增销售单”
1. 在弹出来的对话框中，填写要货单位、交货日期、按品类下单、开票日期、政策日期、销售类型、收货地址、货运站及货运站提货人信息、是否自提及提货人信息、订单备注、以及物料信息如销售机型类型、批准价目表、批准单价、货款类型、奖励款类型、使用奖励款金额、发货仓库、物料备注，确认信息无误以后，点击提交
1. 在提示“操作成功”以后，在订单列表中，能够看到一张的订单状态为“待财务审批”的订单。（**PS：如果在“基础信息管理→组织开关控制”中，“销售单是否需要财务审核”的开关没给勾上的话，此时订单的状态会变为“待提货”，相应的资金和库存会发生变化**）
1. 